<section class="product">
  <div class="product__container container">
    <div class="product__content">

      <!-- Галерея -->
      <div class="product__gallery">
        <!-- Thumbs -->
        <div class="product__thumbs swiper">
          <div class="product__wrapper swiper-wrapper">
            {% for media in product.media %}
              <div class="swiper-slide product__thumb-slide">
                {{ media | image_url: width: 200 | image_tag: class: 'product__image' }}
              </div>
            {% endfor %}
          </div>
        </div>

        <!-- Main slides -->
        <div class="product__inner swiper">
          <!-- Бейдж -->
          {% if product.tags contains 'highly_rated' %}
            <div class="product__label">
              <svg class="product__icon">
                <use href="{{ 'sprite.svg' | asset_url }}#star"></use>
              </svg>
              <span class="product__slogan">Highly Rated</span>
            </div>
          {% endif %}

          <div class="product__wrapper swiper-wrapper">
            {% for media in product.media %}
              <div class="swiper-slide product__main-slide">
                {{ media | image_url: width: 1200 | image_tag: class: 'product__image' }}
              </div>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Інформація -->
      <div class="product__info">
        <div class="product__wrap">
          <h2 class="product__name">{{ product.title }}</h2>

          <span class="product__price">
            {{ product.selected_or_first_available_variant.price | money }}
          </span>
        </div>

        <!-- Color variants через метаполя -->
        {% if product.metafields.custom.colors %}
          <ul class="product__list">
            {% for color in product.metafields.custom.colors.value %}
              <li class="product__item">
                <button 
                  class="product__button"
                  type="button"
                  data-color="{{ color.name }}"
                >
                  <img
                    class="product__image"
                    src="{{ color.image | image_url: width: 200 }}"
                    alt="{{ product.title }}"
                  />
                </button>
              </li>
            {% endfor %}
          </ul>
        {% endif %}

        <!-- Size variants -->
        <div class="product__sizes">
          <span class="product__sizes-title">Select Size:</span>
          <ul class="product__sizes-list">
            {% for option in product.options_with_values %}
              {% if option.name == 'Size' %}
                {% for value in option.values %}
                  <li class="product__sizes-item">
                    <button 
                      class="product__sizes-btn"
                      type="button"
                      data-size="{{ value }}"
                    >
                      {{ value }}
                    </button>
                  </li>
                {% endfor %}
              {% endif %}
            {% endfor %}
          </ul>
        </div>

        <!-- Add to Cart -->
        {% form 'product', product %}
          <input 
            type="hidden"
            name="id"
            value="{{ product.selected_or_first_available_variant.id }}"
            class="variant-id-input"
          >
          <button class="product__sizes-add button">
            Add to Bag
          </button>
        {% endform %}

        <div class="product__sizes-desc">
          {{ product.description }}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Main Product",
  "settings": []
}
{% endschema %}

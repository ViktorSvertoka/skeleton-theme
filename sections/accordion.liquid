<script src="{{ 'accordion.js' | asset_url }}" defer></script>

{% assign product = section.settings.product | default: product %}

{% if product %}
<section
  class="product-accordion w-full max-w-[420px] mx-auto lg:mx-0 lg:ml-auto"
  data-product-accordion
>
  <div class="space-y-4">

    {% assign size_fit = product.metafields.custom.size_fit %}
    {% assign product_notes = product.metafields.custom.product_notes %}
    {% assign delivery_returns = product.metafields.custom.delivery_returns %}

    {% if size_fit != blank %}
      <div class="border border-black rounded-2xl overflow-hidden">
        <h3>
          <button
            class="accordion-trigger group w-full flex items-center justify-between px-5 py-4 text-[13px] font-medium tracking-wide uppercase hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-black"
            aria-expanded="false"
            aria-controls="accordion-size-fit"
            id="accordion-trigger-size-fit"
          >
            <span>SIZE & FIT</span>

            <span class="relative h-6 w-6">
              <svg class="accordion-icon-plus absolute inset-0 h-6 w-6 transition-opacity duration-300">
                <use href="{{ 'sprite.svg' | asset_url }}#plus"></use>
              </svg>
              <svg class="accordion-icon-minus absolute inset-0 h-6 w-6 opacity-0 transition-opacity duration-300">
                <use href="{{ 'sprite.svg' | asset_url }}#minus"></use>
              </svg>
            </span>
          </button>
        </h3>

        <div
          id="accordion-size-fit"
          class="accordion-panel hidden px-5 pb-5 text-sm leading-relaxed text-gray-700"
          role="region"
          aria-labelledby="accordion-trigger-size-fit"
        >
          {{ size_fit | metafield_tag }}
        </div>
      </div>
    {% endif %}

    {% if product_notes != blank %}
      <div class="border border-black rounded-2xl overflow-hidden">
        <h3>
          <button
            class="accordion-trigger group w-full flex items-center justify-between px-5 py-4 text-[13px] font-medium tracking-wide uppercase hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-black"
            aria-expanded="false"
            aria-controls="accordion-product-notes"
            id="accordion-trigger-product-notes"
          >
            <span>PRODUCT NOTES</span>

            <span class="relative h-6 w-6">
              <svg class="accordion-icon-plus absolute inset-0 h-6 w-6 transition-opacity duration-300">
                <use href="{{ 'sprite.svg' | asset_url }}#plus"></use>
              </svg>
              <svg class="accordion-icon-minus absolute inset-0 h-6 w-6 opacity-0 transition-opacity duration-300">
                <use href="{{ 'sprite.svg' | asset_url }}#minus"></use>
              </svg>
            </span>
          </button>
        </h3>

        <div
          id="accordion-product-notes"
          class="accordion-panel hidden px-5 pb-5 text-sm leading-relaxed text-gray-700"
          role="region"
          aria-labelledby="accordion-trigger-product-notes"
        >
          {{ product_notes | metafield_tag }}
        </div>
      </div>
    {% endif %}

    {% if delivery_returns != blank %}
      <div class="border border-black rounded-2xl overflow-hidden">
        <h3>
          <button
            class="accordion-trigger group w-full flex items-center justify-between px-5 py-4 text-[13px] font-medium tracking-wide uppercase hover:bg-gray-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-black"
            aria-expanded="false"
            aria-controls="accordion-delivery-returns"
            id="accordion-trigger-delivery-returns"
          >
            <span>DELIVERY & RETURNS</span>

            <span class="relative h-6 w-6">
              <svg class="accordion-icon-plus absolute inset-0 h-6 w-6 transition-opacity duration-300">
                <use href="{{ 'sprite.svg' | asset_url }}#plus"></use>
              </svg>
              <svg class="accordion-icon-minus absolute inset-0 h-6 w-6 opacity-0 transition-opacity duration-300">
                <use href="{{ 'sprite.svg' | asset_url }}#minus"></use>
              </svg>
            </span>
          </button>
        </h3>

        <div
          id="accordion-delivery-returns"
          class="accordion-panel hidden px-5 pb-5 text-sm leading-relaxed text-gray-700"
          role="region"
          aria-labelledby="accordion-trigger-delivery-returns"
        >
          {{ delivery_returns | metafield_tag }}
        </div>
      </div>
    {% endif %}

  </div>
</section>
{% endif %}

{% schema %}
{
  "name": "Accordion",
  "tag": "section",
  "settings": [
    {
      "type": "product",
      "id": "product",
      "label": "Product"
    }
  ],
  "presets": [
    {
      "name": "Accordion"
    }
  ]
}
{% endschema %}
